<%- include('partials/header') %> <% function submit(song) { ; } %>

<h2><i><%= song.title %></i> by <a href="<%= '/artists/' + song.artist %>"><%= song.artist %></a><% if (song.featuredArtist.length > 0) { %>, featuring <%= song.featuredArtist %><% } %></h2>


<p>Album: <a href="/artists/<%= song.artist %>/<%= song.album %>"
  ><%= song.album %> (<%= song.year %>)</a
  ><br>
  Track: <%= song.trackNumber %><br>
  Writers: <% if (song.authors.length === 1) { %>
    <%= song.authors %>
    <% } else if (song.authors.length === 2) { %>
      <%= song.authors[0] + ' and ' + song.authors[1]  %>
    <% } else { %>
      <% song.authors.forEach((author, index, arr) => { %>
      <% if (index !== arr.length - 1) { %>
        <%= author + ', ' %>
        <% } else { %>
        <%= ' and ' + author %>
        <% }})} %>
</p>

<form style="display: inline;" action="/submitupdate" method="post">
  <button
    class="btn btn-primary btn-sm "
    onclick="this.form.submit()"
    name="updateThis"
    value="<%= song._id %>"
  >
    <i class="fas fa-pencil-alt"></i> EDIT
  </button>
</form><form style="display: inline;" action="/delete" method="post">
  <button
    class="btn btn-primary btn-sm"
    onclick="this.form.submit()"
    name="deleteThis"
    value="<%= song._id %>"
  >
    <i class="fas fa-trash-alt"></i> DELETE
  </button>
</form>

<table class="table table-striped">
  <tr>
    <th>Line</th><th>Lyric</th>
  </tr>
  <% song.lyrics.forEach((line, index) => { %>
    <tr>
      <td><%= index + 1 %></td>
      <td><%= line %></td>
    </tr>
  <% }); %></table> 

  <a href="#top"><button class="btn btn-primary">Return to Top</button></a>
  
  <%- include('partials/footer') %></p>
