<%- include('partials/header') %>

<h2>All Songs Database</h2>
<a href="/submit"><button class="btn btn-primary">Add New</button></a>
<% if (entries.length === 0 ) { %>
<p>No results found.</p>
<% } else { %>
<table class="table table-striped" id="results-table">
  <thead class="thead-light">
    <tr>
      <th scope="col"><a href="javascript:sortTable(0,'T');">Artist</a></th>
      <th scope="col"><a href="javascript:sortTable(1,'T');">Album</a></th>
      <th scope="col"><a href="javascript:sortTable(2,'N');">Track</a></th>
      <th scope="col"><a href="javascript:sortTable(3,'T');">Song Title</a></th>
      <th scope="col"><a href="javascript:sortTable(4,'T');">Feat.</a></th>
      <th scope="col"><a href="javascript:sortTable(5,'N');">Year</a></th>
      <th scope="col"></th>
      <th scope="col"></th>
    </tr>
  </thead>
  <tbody>
    <% entries.forEach((entry) => { %>

    <tr>
      <td><a href="/artists/<%= entry.artist %>"><%= entry.artist %></a></td>
      <td>
        <a href="/artists/<%= entry.artist %>/<%= entry.album %>"
          ><%= entry.album %></a
        >
      </td>
      <td><%= entry.trackNumber %></td>
      <td><a href="/songs/<%= entry._id %>"><%= entry.title %></a></td>
      <td><%= entry.featuredArtist %></td>
      <td><%= entry.year %></td>
      <td>
        <form action="/submitupdate" method="post">
          <button
            class="btn btn-primary btn-sm m-0"
            onclick="this.form.submit()"
            name="updateThis"
            value="<%= entry.id %>"
          >
            <i class="fas fa-pencil-alt"></i>
          </button>
        </form>
      </td>
      <td>
        <form action="/delete" method="post">
          <button
            class="btn btn-primary btn-sm m-0"
            onclick="this.form.submit()"
            name="deleteThis"
            value="<%= entry.id %>"
          >
            <i class="fas fa-trash-alt"></i>
          </button>
        </form>
      </td>
    </tr>
    <% }) %>
  </tbody>
</table>

<% } %>

<a href="/submit"><button class="btn btn-primary">Add New</button></a>

<a href="#top"><button class="btn btn-primary">Return to Top</button></a>

<script src="/scripts/sort.js" type="text/javascript"></script>

<%- include('partials/footer') %>
