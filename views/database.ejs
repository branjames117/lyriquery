<%- include('partials/header') %>

<h2>All Songs Database</h2>
<a href="/submit"><div class="form-group d-flex flex-column"><button class="btn btn-primary">Add New</button></div></a>
<% if (entries.length === 0 ) { %>
<p>No results found.</p>
<% } else { %>
<table class="table table-striped full-table table-hover" id="results-table">
  <thead class="thead-light">
    <tr>
      <th scope="col"><a href="javascript:sortTable(0,'T');">Artist</a></th>
      <th scope="col"><a href="javascript:sortTable(1,'T');">Album</a></th>
      <th scope="col"><a href="javascript:sortTable(2,'N');">Track</a></th>
      <th scope="col"><a href="javascript:sortTable(3,'T');">Song</a></th>
      <th scope="col"><a href="javascript:sortTable(4,'T');">Feat.</a></th>
      <th scope="col"><a href="javascript:sortTable(5,'N');">Year</a></th>
      <th scope="col"></th>
      <th scope="col"></th>
    </tr>
  </thead>
  <tbody>
    <% entries.forEach((entry) => { %>

    <tr>
      <td><a href="/artist/<%= entry.artist %>"><%= entry.artist %></a></td>
      <td>
        <a href="/artist/<%= entry.artist %>/<%= entry.album %>"
          ><%= entry.album %></a
        >
      </td>
      <td><%= entry.trackNumber %></td>
      <td><a href="/song/<%= entry._id %>"><%= entry.title %></a></td>
      <td><%= entry.featuredArtist %></td>
      <td><%= entry.year %></td>
      <td>
        <form action="/submit" method="post">
          <button
            class="btn btn-primary btn-sm m-0"
            onclick="this.form.submit()"
            name="update"
            value="<%= entry.id %>"
          >
            <i class="fas fa-pencil-alt"></i>
          </button>
        </form>
      </td>
      <td>
        <form action="/delete" method="post">
          <button
            class="btn btn-primary btn-sm m-0"
            onclick="this.form.submit()"
            name="delete"
            value="<%= entry.id %>"
          >
            <i class="fas fa-trash-alt"></i>
          </button>
        </form>
      </td>
    </tr>
    <% }) %>
  </tbody>
</table>
<table class="table table-striped mobile-table table-hover" id="results-table">
  <thead class="thead-light">
    <tr>
      <th scope="col">Artist</th>
      <th scope="col">Album</th>
      <th scope="col">Track</th>
      <th scope="col">Song</th>
      <th scope="col">Year</th>
    </tr>
  </thead>
  <tbody>
    <% entries.forEach((entry) => { %>

    <tr>
      <td><a href="/artist/<%= entry.artist %>"><%= entry.artist %></a></td>
      <td>
        <a href="/artist/<%= entry.artist %>/<%= entry.album %>"
          ><%= entry.album %></a
        >
      </td>
      <td><%= entry.trackNumber %></td>
      <td><a href="/song/<%= entry._id %>"><%= entry.title %></a></td>
      <td><%= entry.year %></td></tr>
    </tr>
    <% }) %>
  </tbody>
</table>
<% } %>

<a href="/submit"><div class="form-group d-flex flex-column"><button class="btn btn-primary">Add New</button></div></a>

<a href="#top"><div class="form-group d-flex flex-column"><button class="btn btn-primary">Return to Top</button></div></a>

<script src="/scripts/sort.js" type="text/javascript"></script>

<%- include('partials/footer') %>
