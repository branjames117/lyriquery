<%- include('partials/header') %>

<h2>All Songs by <a href="/artists/<%= artist %>"
  ><%= artist %></a
></h2>

<% if (songs.length === 0 ) { %>
  <p>No results found.</p>
  <% } else { %>
  <table class="table table-striped" id="results-table">
    <thead class="thead-light">
      <tr>
        <th scope="col"><a href="javascript:sortTable(0,'T');">Album</a></th>
        <th scope="col"><a href="javascript:sortTable(1,'N');">Track</a></th>
        <th scope="col"><a href="javascript:sortTable(2,'T');">Song Title</a></th>
        <th scope="col"><a href="javascript:sortTable(3,'T');">Featuring</a></th>
        <th scope="col"><a href="javascript:sortTable(4,'N');">Year</a></th>
        <th scope="col"></th>
        <th scope="col"></th>
      </tr>
    </thead>
    <tbody>
      <% songs.forEach((song) => { %>
  
      <tr>
        <td><a href="/artists/<%= song.artist %>/<%= song.album %>"
          ><%= song.album %></a
        ></td>
        <td><%= song.trackNumber %></td>
        <td><a href="/songs/<%= song._id %>"><%= song.title %></a></td>
        <td><%= song.featuredArtist %></td>
        <td><%= song.year %></td>
        <td>
          <form action="/submitupdate" method="post">
            <button
              class="btn btn-primary btn-sm m-0"
              onclick="this.form.submit()"
              name="updateThis"
              value="<%= song._id %>"
            >
              <i class="fas fa-pencil-alt"></i>
            </button>
          </form>
        </td>
        <td>
          <form action="/delete" method="post">
            <button
              class="btn btn-primary btn-sm m-0"
              onclick="this.form.submit()"
              name="deleteThis"
              value="<%= song._id %>"
            >
              <i class="fas fa-trash-alt"></i>
            </button>
          </form>
        </td>
      </tr>
      <% }) %>
    </tbody>
  </table>
  
  <% } %>
  
  <a href="/submit"><button class="btn btn-primary">Add New</button></a>

  <script src="/scripts/sort.js" type="text/javascript"></script>

  <%- include('partials/footer') %></p>
